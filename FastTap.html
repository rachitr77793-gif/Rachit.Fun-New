<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>âš¡ Fast Tap â€” Rachit.Fun</title>

<style>
    body {
        font-family: "Inter", sans-serif;
        background: #f8f9ff;
        margin: 0;
        padding: 0;
        color: #222;
    }

    /* Ribbon (same as your Flappy game) */
    .top-bar {
        width: 100%;
        padding: 18px 35px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        background: white;
        border-bottom: 3px solid #ddd;
        box-sizing: border-box;
    }

    .left-title {
        font-size: 28px;
        font-weight: 800;
        display: flex;
        gap: 10px;
        align-items: center;
    }

    .controls button {
        padding: 10px 20px;
        border-radius: 10px;
        border: 2px solid black;
        background: white;
        cursor: pointer;
        font-size: 15px;
        font-weight: 600;
        margin-left: 10px;
        transition: 0.25s;
    }

    .controls button:hover {
        background: #e9e9e9;
    }

    .container {
        margin: 40px auto;
        background: white;
        padding: 40px;
        width: 650px;
        border-radius: 25px;
        box-shadow: 0 10px 25px rgba(0,0,0,0.08);
        text-align: center;
    }

    h2 {
        font-size: 34px;
        margin-bottom: 20px;
        font-weight: 700;
    }

    #gameBox {
        margin-top: 20px;
        background: #ddd;
        height: 160px;
        border-radius: 18px;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 28px;
        font-weight: 600;
        cursor: pointer;
        user-select: none;
        transition: 0.25s;
        border: 4px solid black;
    }

    #result {
        font-size: 22px;
        margin-top: 20px;
        font-weight: 600;
    }

    #animalMsg {
        font-size: 20px;
        margin-top: 5px;
        color: #444;
    }
</style>
</head>

<body>

<!-- Ribbon -->
<div class="top-bar">
    <div class="left-title">ðŸŽ® Rachit.Fun â€” Fast Tap</div>

    <div class="controls">
        <button id="startBtn">Start</button>

        <!-- FIX: Back button connected properly -->
        <button onclick="location.href='index.html'">Back</button>

        <button onclick="localStorage.clear(); alert('Scores Reset!')">Reset All</button>
    </div>
</div>

<div class="container">
    <h2>âš¡ Fast Tap Reaction Test</h2>

    <div id="gameBox">Press Start</div>

    <div id="result"></div>
    <div id="animalMsg"></div>
</div>

<script>
    const gameBox = document.getElementById("gameBox");
    const startBtn = document.getElementById("startBtn");
    const result = document.getElementById("result");
    const animalMsg = document.getElementById("animalMsg");

    let waiting = false;
    let ready = false;
    let startTime = 0;
    let timeoutID;

    function getAnimal(reaction) {
        if (reaction <= 20) return "âš¡ Lightning Flash (Superhuman!)";
        if (reaction <= 50) return "ðŸ† Cheetah Speed";
        if (reaction <= 100) return "ðŸ¦… Falcon Reflexes";
        if (reaction <= 200) return "ðŸ¦Š Fox Quickness";
        if (reaction <= 300) return "ðŸ• Fast Dog";
        if (reaction <= 500) return "ðŸ¢ Turtle Mode";
        return "ðŸŒ Snail... Try Faster!";
    }

    function saveScore(ms) {
        let scores = JSON.parse(localStorage.getItem("reactionScores") || "[]");
        scores.push(ms);
        localStorage.setItem("reactionScores", JSON.stringify(scores));
    }

    startBtn.onclick = () => {
        result.innerHTML = "";
        animalMsg.innerHTML = "";
        gameBox.style.background = "#f4d03f";
        gameBox.innerHTML = "Wait...";
        waiting = true;
        ready = false;

        const delay = Math.random() * 3000 + 1000;

        timeoutID = setTimeout(() => {
            waiting = false;
            ready = true;
            gameBox.style.background = "#58d68d";
            gameBox.innerHTML = "TAP!";
            startTime = new Date().getTime();
        }, delay);
    };

    gameBox.onclick = () => {
        if (waiting) {
            clearTimeout(timeoutID);
            waiting = false;
            ready = false;
            gameBox.style.background = "#e74c3c";
            gameBox.innerHTML = "Too Soon!";
            result.innerHTML = "You tapped too early.";
            animalMsg.innerHTML = "";
            return;
        }

        if (ready) {
            let end = new Date().getTime();
            let reaction = end - startTime;

            gameBox.style.background = "#3498db";
            gameBox.innerHTML = "Good!";
            result.innerHTML = `Your Reaction Time: <b>${reaction} ms</b>`;

            const animal = getAnimal(reaction);
            animalMsg.innerHTML = `You reacted like: <b>${animal}</b>`;

            saveScore(reaction);

            ready = false;
        }
    };
</script>

</body>
</html>
